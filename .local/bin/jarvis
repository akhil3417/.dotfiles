#!/usr/bin/env python3


# def interactive_sgpt():
#     while True:
#         user_input = input("Enter your query (or 'q' to quit): ")
#         if user_input.lower() == 'q':
#             break
#         else:
#             command = f"sgpt --top-p '0.01' --temperature '0.32' --no-cache --role piper --chat convi '{user_input}' | tee /dev/tty | ~/gitclones/piper/piper --model ~/gitclones/piper/en_US-hfc_female-medium.onnx  --output-raw 2>/dev/null | aplay -r 22050 -f S16_LE -t raw - 2>/dev/null"
#             subprocess.run(command, shell=True)

# if __name__ == "__main__":
    # interactive_sgpt()

import subprocess
import os

def interactive_sgpt():
    # Define base directory
    base_dir = '~/gitclones/piper/'

    # Define voice models
    voice_models = {
        '1': os.path.join(base_dir, 'en_US-libritts-high.onnx'),
        '2': os.path.join(base_dir, 'en_US-hfc_female-medium.onnx'),
        '3': os.path.join(base_dir, 'en_US-amy-medium.onnx'),
        '4': os.path.join(base_dir, 'en_US-joe-medium.onnx'),
    }
    roles=["aphorism","buddha","comedian","composer","debater","drunk","essay_writer","fallacy_finder","friend","gaslighter","gnomist","historian","lunatic","magician","mental_health","motivational_coach","moviecritic","novelist","piper","poet","psychologist","screenwriter","storyteller","tech_reviewer","virtual_char","wiki"]
    # Choose default voice model
    voice_model = voice_models['2']

    # Define piper executable
    piper_executable = os.path.join(base_dir, 'piper')

    while True:
        user_input = input("Enter your query (or 'q' to quit, or 'm' to change voice model): ")
        if user_input.lower() == 'q':
            break
        elif user_input.lower() == 'm':
            model_choice = input("Choose voice model: 1, 2, 3, or 4: ")
            if model_choice in voice_models:
                voice_model = voice_models[model_choice]
            else:
                print("Invalid choice. Please choose 1, 2, 3, or 4.")
        else:
            command = f"sgpt --top-p '0.01' --temperature '0.32' --no-cache --role jarvis --chat temp '{user_input}' | tee /dev/tty |{piper_executable} --model {voice_model}  --output-raw 2>/dev/null | aplay -r 22050 -f S16_LE -t raw - 2>/dev/null"
            subprocess.run(command, shell=True)

if __name__ == "__main__":
    interactive_sgpt()
